@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

title Component Diagram - Backend API

Container(backend, "Backend API", "Go, Gin", "Business logic layer")

Component(auth, "Authentication", "Go", "JWT validation, RBAC")
Component(assessment, "Assessment Service", "Go", "Manages assessments")
Component(scoring, "Scoring Engine", "Go", "Fibonacci scoring")
Component(execution, "Code Execution Client", "Go", "Docker communication")

ContainerDb(db, "Database", "PostgreSQL")

Component(user_repo, "User Repository", "GORM", "User data")
Component(assessment_repo, "Assessment Repository", "GORM", "Assessment data")
Component(question_repo, "Question Repository", "GORM", "Question data")

Container(ai, "AI Service", "Python")
Container(executor, "Code Executor", "Docker")

Rel(auth, user_repo, "Uses")
Rel(assessment, assessment_repo, "Uses")
Rel(scoring, question_repo, "Uses")

Rel(assessment, scoring, "Requests scoring")
Rel(assessment, execution, "Executes code")
Rel(execution, executor, "Calls")

Rel(user_repo, db, "SQL")
Rel(assessment_repo, db, "SQL")
Rel(question_repo, db, "SQL")

@enduml
