@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

title Container Diagram - EasyHire

Person(hr, "HR Specialist")
Person(candidate, "Candidate") 
Person(tech_expert, "Technical Expert")
Person(admin, "System Admin")

System_Boundary(easyhire, "EasyHire Platform") {
    Container(spa, "Single Page Application", "React + TypeScript", "User interface")
    
    Container(backend, "Backend API", "Go + Gin", "Business logic and scoring")
    
    Container(ai_service, "AI Question Service", "Python + FastAPI", "Generates questions")
    
    ContainerDb(db, "Database", "PostgreSQL + pgvector", "Stores data and embeddings")
    
    Container(code_executor, "Code Execution Service", "Go + Docker", "Executes Go code securely")
    
    Container(redis, "Cache", "Redis", "Caching and sessions")
}

System_Ext(ai_providers, "AI Providers", "Gemini, OpenRouter")
System_Ext(email, "Email Service", "SendGrid")
System_Ext(ats, "ATS Systems", "Greenhouse")

Rel(hr, spa, "Uses", "HTTPS")
Rel(candidate, spa, "Uses", "HTTPS")
Rel(tech_expert, spa, "Uses", "HTTPS")
Rel(admin, spa, "Uses", "HTTPS")

Rel(spa, backend, "API calls", "REST/HTTPS")
Rel(backend, db, "Reads/writes", "SQL")
Rel(backend, ai_service, "Requests questions", "gRPC/HTTP")
Rel(backend, code_executor, "Executes code", "HTTP")
Rel(backend, redis, "Caches", "Redis")

Rel(ai_service, ai_providers, "Calls", "HTTPS")
Rel(backend, email, "Sends emails", "SMTP")
Rel(backend, ats, "Exports data", "API")

@enduml
