@startuml c4_level2
!includeurl https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

Person(hr, "HR Specialist")
Person(candidate, "Candidate")
Person(tech_expert, "Technical Expert")
Person(admin, "System Admin")

System_Boundary(easyhire, "EasyHire Platform") {
    Container(spa, "Single Page Application", "React + TypeScript", "Provides user interface for all roles")
    
    Container(backend, "Backend API", "Go + Gin", "Handles business logic and assessment management")
    
    Container(ai_service, "AI Question Service", "Python + FastAPI", "Generates and validates questions using AI")
    
    ContainerDb(db, "Database", "PostgreSQL + pgvector", "Stores users, assessments, questions, results")
    
    Container(code_executor, "Code Execution Service", "Go + Docker", "Executes candidate code in secure containers")
    
    Container(redis, "Cache", "Redis", "Session management and caching")
}

System_Ext(ai_providers, "AI Providers", "Gemini, OpenRouter")
System_Ext(email, "Email Service", "SendGrid")
System_Ext(ats, "ATS Systems", "Greenhouse")

Rel(hr, spa, "Uses", "HTTPS")
Rel(candidate, spa, "Uses", "HTTPS")
Rel(tech_expert, spa, "Uses", "HTTPS")
Rel(admin, spa, "Uses", "HTTPS")

Rel(spa, backend, "API calls", "REST/HTTPS")
Rel(backend, db, "Reads/writes data", "SQL")
Rel(backend, ai_service, "Requests question generation", "gRPC/HTTP")
Rel(backend, code_executor, "Submits code for execution", "HTTP")
Rel(backend, redis, "Caches data", "Redis protocol")

Rel(ai_service, ai_providers, "Calls AI models", "HTTPS")
Rel(backend, email, "Sends emails", "SMTP/API")
Rel(backend, ats, "Exports data", "API")

@enduml
